process MuonEff = {

    source = PoolSource 
    { 
      untracked vstring fileNames = {
         // FNAL Zmumu RelVal file - put your own file here!
'/store/relval/2008/4/14/RelVal-RelValZMM-1207860742-2nd-05/0000/526B36BF-8B0A-DD11-B077-001617E30F48.root'
#'/store/relval/2008/4/14/RelVal-RelValZMM-1207860742-2nd-05/0000/64FBA905-8A0A-DD11-A9F2-0019DB2F3F9B.root',
#'/store/relval/2008/4/14/RelVal-RelValZMM-1207860742-2nd-05/0000/88722EAA-890A-DD11-AB6C-000423D6B358.root',
#'/store/relval/2008/4/14/RelVal-RelValZMM-1207860742-2nd-05/0000/9E434308-8A0A-DD11-95B0-000423D6AF24.root',
#'/store/relval/2008/4/14/RelVal-RelValZMM-1207860742-2nd-05/0000/DA5E023D-8A0A-DD11-81B3-001617E30F4C.root'
      } 
    }
    
    untracked PSet maxEvents = {untracked int32 input = 1000 }
    
    // keep the logging output to a nice level
    service = MessageLogger {
	#untracked vstring destinations   = { "cout","cerr" }
	untracked vstring destinations   = { "cout" }
    }
    
    
    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

    module TPEdm = TagProbeEDMNtuple
    {
       // Type of tag-probe candidates, use "Muon" or "Electron"
       untracked string tagProbeType = "Muon"

       // Store some generic information about the event
       // in case we want it
       untracked vint32 mcParticles = {23,13,22}
       untracked vint32 mcParents   = {0,0,0}
       
       // Tag & Probe Muon Candidate Collections
       untracked VInputTag tagCandTags = {preGlbCands}
       untracked VInputTag passProbeCandTags = {tkStaMatched}
       untracked VInputTag allProbeCandTags = {preTkCands}

       // Truth Map Tags
       untracked VInputTag tagTruthMatchMapTags = {tagMuonMatch}
       untracked VInputTag passProbeTruthMatchMapTags = {passProbeMuonMatch}
       untracked VInputTag allProbeTruthMatchMapTags = {allProbeMuonMatch}

       // Tag & Probe Muon Association Map ... can have many, for
       // as many kinds of probe/pass-probe combination as desired.
       // (Then the above muon and cand arrays should be filled appropriately)
       untracked VInputTag tagProbeMapTags = { muonTagProbeMap }

       // Trigger & Trigger Matching tags
       untracked InputTag triggerEventTag = hltTriggerSummaryRAW
       untracked InputTag hltL1Tag = hltSingleMuIsoLevel1Seed
       untracked InputTag hltTag = hltSingleMuIsoL3IsoFiltered
       untracked double triggerDelRMatch = 0.15

   }


    include "MuonAnalysis/TagAndProbe/data/tag_probe_generic.cfi"
    
    //path p1 = { muon_cands & z_cands }
    path p1 = { muon_cands & TPEdm }

    module outpath = PoolOutputModule
    {
       untracked string fileName = "output/generic_tp_edm_ntuple_cmssw205_1.root"

       untracked vstring outputCommands = {
       "drop *",
       "keep *_TPEdm_*_*" }
    }
    
    endpath the_end = { outpath }
    
}
