// Example of EDM TTree maker script for electron tag and probe.
// 1.) Modify the "PoolSource" module to run over your favorite data sample.
// 2.) Modify the following line to choose your own tag-probe pair: 
// 'include "MuonAnalysis/TagAndProbe/data/tag_probe_electron_example.cfi"'
// 3.) Also modify the "outpath" module to change the output file name.



process ElectronEff = {

    source = PoolSource 
    { 
      untracked vstring fileNames = {
      } 
    }

replace PoolSource.fileNames = { 
// CSA08: Z-->e+e- re-Reco sample
'file:/uscms_data/d1/kalanand/CSA08-Zee/165E4BA2-AC2B-DD11-8163-001A644EB7CE.root',
'file:/uscms_data/d1/kalanand/CSA08-Zee/2E9A31CC-AC2B-DD11-931E-001A644EB264.root',
'file:/uscms_data/d1/kalanand/CSA08-Zee/5C0A6698-A42B-DD11-B7C5-00145EED0908.root',
'file:/uscms_data/d1/kalanand/CSA08-Zee/8A71884B-992B-DD11-8922-001A644EB2CA.root',
'file:/uscms_data/d1/kalanand/CSA08-Zee/90CB8C85-A02B-DD11-A36F-001A6434EF14.root',
'file:/uscms_data/d1/kalanand/CSA08-Zee/A29C770D-AA2B-DD11-9F2F-00145EED0788.root'
}

    untracked PSet maxEvents = {untracked int32 input = -1 }
    
    // keep the logging output to a nice level
    service = MessageLogger {
	untracked vstring destinations   = { "cout","cerr" }
    }
    
    
    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

    module TPEdm = TagProbeEDMNtuple
    {
     

       // Type of tag-probe candidates, use "Muon" or "Electron"
       // For the moment this only affects the kind of particle
       // used for storing MC truth information.
       untracked string tagProbeType = "Electron"

       untracked bool checkExactOverlap = false

       // Store some generic information about the event
       // in case we want it
       untracked vint32 mcParticles = {23,11,22}
       untracked vint32 mcParents   = {0,0,0}
       untracked VInputTag trackTags = {generalTracks}
       untracked InputTag verticesTag = offlinePrimaryVertices


   // Tag & Probe Electron Candidate Collections
     untracked VInputTag tagCandTags = {tagCands}
     untracked VInputTag allProbeCandTags = {allProbeCands}


   // Truth Map Tags
     untracked VInputTag tagTruthMatchMapTags = {tagMatch}
     untracked VInputTag allProbeTruthMatchMapTags = {allProbeMatch}


    // Tag & Probe Muon Association Map 
     untracked VInputTag tagProbeMapTags = { tagProbeMap }



   // Pass Probe Electron Candidate Collections

    untracked VInputTag passProbeCandTags = {passProbeCands}

    untracked VInputTag passProbeTruthMatchMapTags = {passProbeMatch}

    // Trigger & Trigger Matching tags
     untracked InputTag triggerEventTag = hltTriggerSummaryRAW
     untracked InputTag hltL1Tag = hltL1IsoSingleElectronTrackIsolFilter
     untracked InputTag hltTag = hltL1IsoSingleElectronPixelMatchFilter
     untracked double triggerDelRMatch = 0.15
    
   }


    include "MuonAnalysis/TagAndProbe/data/tag_probe_electron_example.cfi"


    path p1 = { lepton_cands & TPEdm }

    module outpath = PoolOutputModule
    {
     untracked string fileName = "output/electron_tagprobe_EDM_example.root"


       untracked vstring outputCommands = {
	  "drop *",
	  "keep *_TPEdm_*_*" 
       }
    }
    
    endpath the_end = { outpath }
    
}
