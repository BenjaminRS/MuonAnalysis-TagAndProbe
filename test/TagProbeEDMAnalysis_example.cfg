process Demo =  {
  
   // keep the logging output to a nice level
   include "FWCore/MessageService/data/MessageLogger.cfi"
   //replace MessageLogger.destinations = {cout,cerr}
   replace MessageLogger.destinations = {cout}

   source = PoolSource 
   {
      untracked vstring fileNames = {
         "file:output/generic_tp_edm_ntuple_cmssw207_1.root"
         //"file:output/generic_track_tp_edm_ntuple_cmssw207_1.root"
      }
   }

   untracked PSet maxEvents = {untracked int32 input = -1}

   module demo = TagProbeEDMAnalysis { 

      // Make some plots of tree variables ...
      untracked vstring quantities      = {"TPmass","TPmass","MC23mass","TPProbephi"}
      untracked vstring conditions      = {"1","TPppass==1","1","1"}   
      untracked vstring outputFileNames = {"Zmass.gif","Zmass_pass.gif","MCZmass.gif","Phi.gif"}

      // Binning for the plots ...
      untracked vuint32 XBins           = {100,100,100,100}
      untracked vdouble XMin            = {50.0,50.0,50.0,-3.14}
      untracked vdouble XMax            = {120.0,120.0,120.0,3.14}
      untracked vuint32 logY            = {1,1,1,0}
    
      // Efficiency/Fitting variables
      untracked bool CalculateEffSideBand = true // Calculate and store effs using SB
      untracked bool CalculateEffFitter   = true // Calculate and store effs from Roofit
      untracked bool CalculateEffTruth    = true // Calculate and store true effs

      // Root file to eff histograms to
      untracked string FitFileName        = "muon_eff_test.root"

      // Variable Specifications for SB subtractions and Roofit

      // Choose binned or unbinned fitter ...
      // Note that the unbinned fit will not fit weighted data,
      // if you wish to use weights, use the binned fit.
      untracked bool UnbinnedFit          = false

      // Request a 2D fit as well if desired ... will add 2D eff hists
      // binned in Pt and Var2
      untracked bool Do2DFit              = true

      // Mass window for fitting
      untracked int32 NumBinsMass         = 50
      untracked double MassLow            = 50.0
      untracked double MassHigh           = 120.0

      // Variables and binning for the eff hists
      // Valid variables names for the eff binning are:
      // "pt","p","px","py","pz","e","et","eta" and "phi"
      // If omitted the defaults are var1 = pt and var2 = eta
      untracked string NameVar1             = "pt"
      // This way of declaring the bin will overide any other
      untracked vdouble Var1BinBoundaries   = {0.0,30.0,40.0,50.0,100.0}

      untracked string NameVar2             = "eta"
      untracked int32 NumBinsVar2          = 1
      untracked double Var2Low             = -2.5
      untracked double Var2High            =  2.5
      //untracked vdouble Var2BinBoundaries   = {-2.5,2.5}

      // Fitter variables - for the Roofit fitter
      // If you want the variable to float in the fit fill
      // three array elements {default, range_low, range_high}
      // If the variable should be fixed, fill one element {value}
      // Signal variables
      untracked vdouble SignalMean        = {91.1876,90.0,92.0}
      untracked vdouble SignalWidth       = {2.8,1.0,4.0}
      untracked vdouble SignalSigma       = {1.1,0.5,4.0}
      untracked vdouble SignalWidthL      = {3.0,0.0,20.0}
      untracked vdouble SignalWidthR      = {0.52,0.0,10.0}

      untracked vdouble BifurGaussFrac    = {0.87}

      // Background variables
      untracked vdouble BkgAlpha           = {62.0,50,70}
      untracked vdouble BkgBeta            = {0.001,0.0,0.1}
      untracked vdouble BkgPeak            = {91.1876}
      untracked vdouble BkgGamma           = {0.05,0.0,0.1}

      // Efficiency variables
      untracked vdouble Efficiency        = {0.98,0.0,1.0}    
      untracked vdouble NumSignal         = {4000.0,-10.0,100000.0}    
      untracked vdouble NumBkgPass        = {1000.0,-10.0,10000.0}    
      untracked vdouble NumBkgFail        = {10.0,-10.0,10000.0}    

      // Variables for sideband subtraction
      untracked double SBSPeak            = 91.1876   // Mass peak
      untracked double SBSStanDev         = 2         // SD from peak for subtraction

   }

path p = {demo} 

}
